---
Date: 2023-06-13
Author: Jimmy Briggs <jimmy.briggs@jimbrig.com>
Source: reader
Link: https://inadarei.github.io/rfc-healthcheck/
Tags: ["#Type/Highlight/Article"]
Aliases: ["Health Check Response Format for HTTP APIs", "Health Check Response Format for HTTP APIs"]
---
# Health Check Response Format for HTTP APIs

## Metadata
- Author: [[Irakli Nadareishvili]]
- Full Title: Health Check Response Format for HTTP APIs
- Category: #Type/Highlight/Article
- URL: https://inadarei.github.io/rfc-healthcheck/

## Highlights
- The vast majority of modern APIs driving data to web and mobile applications use HTTP [[RFC7230](https://inadarei.github.io/rfc-healthcheck/#RFC7230)] as their protocol. The health and uptime of these APIs determine availability of the applications themselves. In distributed systems built with a number of APIs, understanding the health status of the APIs and making corresponding decisions, for caching, failover or circuit-breaking, are essential to the ability of providing highly-available solutions. ([View Highlight](https://read.readwise.io/read/01gx1n32rbrty0cz2cvf4ma6ke))
- There exists a wide variety of operational software that relies on the ability to read health check response of APIs. However, there is currently no standard for the health check output response, so most applications either rely on the basic level of information included in HTTP status codes [[RFC7231](https://inadarei.github.io/rfc-healthcheck/#RFC7231)] or use task-specific formats. ([View Highlight](https://read.readwise.io/read/01gx1n3fhtw6vm9pnmhm1j7yvf))
- Standardizing a format for health checks can provide any of a number of benefits, including: ([View Highlight](https://read.readwise.io/read/01gx1n3ke3a11hxhzwme2e9kz6))
- Flexible deployment - since operational tooling and API clients can rely on rich, uniform format, they can be safely combined and substituted as needed. ([View Highlight](https://read.readwise.io/read/01gx1n3mbree42xcjk2f99hs4r))
- Evolvability - new APIs, conforming to the standard, can safely be introduced in any environment and ecosystem that also conforms to the same standard, without costly coordination and testing requirements. ([View Highlight](https://read.readwise.io/read/01gx1n3n7tdn97za8tsnm47j5p))
- This document defines a "health check" format using the JSON format [[RFC8259](https://inadarei.github.io/rfc-healthcheck/#RFC8259)] for APIs to use as a standard point for the health information they offer. Having a well-defined format for this purpose promotes good practice and tooling. ([View Highlight](https://read.readwise.io/read/01gx1n3qqsrgg0qswnk5kt5s8n))
- The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in [[RFC2119](https://inadarei.github.io/rfc-healthcheck/#RFC2119)]. ([View Highlight](https://read.readwise.io/read/01gx1n3t88rcy295j0msvj6mpd))
- Health Check Response Format for HTTP APIs uses the JSON format described in [[RFC8259](https://inadarei.github.io/rfc-healthcheck/#RFC8259)] and has the media type "application/health+json". ([View Highlight](https://read.readwise.io/read/01gx1n41qdwdhk292vpacqvbnt))
- Its content consists of a single mandatory root field ("status") and several optional fields: ([View Highlight](https://read.readwise.io/read/01gx1n47d9tcvmrrwd0dbj8qvh))
- status: (required) indicates whether the service status is acceptable or not. API publishers SHOULD use following values for the field: ([View Highlight](https://read.readwise.io/read/01gx1n4avr3a3bz8jdvp29axn9))
- "pass": healthy (acceptable aliases: "ok" to support Node's Terminus and "up" for Java's SpringBoot), ([View Highlight](https://read.readwise.io/read/01gx1n4gnajkqgaz2s4940mtp0))
- "fail": unhealthy (acceptable aliases: "error" to support Node's Terminus and "down" for Java's SpringBoot), and ([View Highlight](https://read.readwise.io/read/01gx1n4hc7fmbs6dh07mn0k4rc))
- "warn": healthy, with some concerns. ([View Highlight](https://read.readwise.io/read/01gx1n4jbbqe2fcw446ftejhba))
- The value of the status field is case-insensitive and is tightly related with the HTTP response code returned by the health endpoint. For "pass" status, HTTP response code in the 2xx-3xx range MUST be used. For "fail" status, HTTP response code in the 4xx-5xx range MUST be used. In case of the "warn" status, endpoints MUST return HTTP status in the 2xx-3xx range, and additional information SHOULD be provided, utilizing optional fields of the response. ([View Highlight](https://read.readwise.io/read/01gx1n4mjectkgpr85hv70e7gm))
- A health endpoint is only meaningful in the context of the component it indicates the health of. It has no other meaning or purpose. As such, its health is a conduit to the health of the component. Clients SHOULD assume that the HTTP response code returned by the health endpoint is applicable to the entire component (e.g. a larger API or a microservice). This is compatible with the behavior that current infrastructural tooling expects: load-balancers, service discoveries and others, utilizing health-checks. ([View Highlight](https://read.readwise.io/read/01gx1n4tyrrynnf5txe2jh22g7))
- version: (optional) public version of the service. ([View Highlight](https://read.readwise.io/read/01gx1n517234j2as57dqqv54d0))
- releaseId: (optional) in well-designed APIs, backwards-compatible changes in the service should not update a version number. APIs usually change their version number as infrequently as possible, to preserve stable interface. However, implementation of an API may change much more frequently, which leads to the importance of having separate "release number" or "releaseId" that is different from the public version of the API. ([View Highlight](https://read.readwise.io/read/01gx1n530h3sbxhyxrbq5yb4ce))
- notes: (optional) array of notes relevant to current state of health ([View Highlight](https://read.readwise.io/read/01gx1n54vwkcd5sy6kt6rfjvem))
- output: (optional) raw error output, in case of "fail" or "warn" states. This field SHOULD be omitted for "pass" state. ([View Highlight](https://read.readwise.io/read/01gx1n55x0brdc8zk2jdw34c5p))
- checks (optional) is an object that provides detailed health statuses of additional downstream systems and endpoints which can affect the overall health of the main API. Please refer to the "The Checks Object" section for more information. ([View Highlight](https://read.readwise.io/read/01gx1n56kep0jpxpnehjqya9ap))
- links (optional) is an object containing link relations and URIs [[RFC3986](https://inadarei.github.io/rfc-healthcheck/#RFC3986)] for external links that MAY contain more information about the health of the endpoint. All values of this object SHALL be URIs. Keys MAY also be URIs. Per web-linking standards [[RFC8288](https://inadarei.github.io/rfc-healthcheck/#RFC8288)] a link relationship SHOULD either be a common/registered one or be indicated as a URI, to avoid name clashes. If a "self" link is provided, it MAY be used by clients to check health via HTTP response code, as mentioned above. ([View Highlight](https://read.readwise.io/read/01gx1n58cfbmbyjfetzach3y5h))
- serviceId (optional) is a unique identifier of the service, in the application scope. ([View Highlight](https://read.readwise.io/read/01gx1n5a44xgyq3z2q0dm2fwek))
- description (optional) is a human-friendly description of the service. ([View Highlight](https://read.readwise.io/read/01gx1n5atyefdk8j8a71v6hzr5))
- The "checks" object MAY have a number of unique keys, one for each logical downstream dependency or sub-component. Since each sub-component may be backed by several nodes with varying health statuses, these keys point to arrays of objects. In case of a single-node sub-component (or if presence of nodes is not relevant), a single-element array SHOULD be used as the value, for consistency. ([View Highlight](https://read.readwise.io/read/01gx1n5btjb7wh5fwwrawdg3ye))
- The key identifying an element in the object SHOULD be a unique string within the details section. It MAY have two parts: "{componentName}:{measurementName}", in which case the meaning of the parts SHOULD be as follows: ([View Highlight](https://read.readwise.io/read/01gx1n5dfss4efc8h22dnzgn57))
- componentName: (optional) human-readable name for the component. MUST not contain a colon, in the name, since colon is used as a separator. ([View Highlight](https://read.readwise.io/read/01gx1n5e6fm9a8s2gkez8s3v34))
- measurementName: (optional) name of the measurement type (a data point type) that the status is reported for. MUST not contain a colon, in the name, since colon is used as a separator. The observation's name can be one of: ([View Highlight](https://read.readwise.io/read/01gx1n5f6q978adrh7cyhtyg7p))
- A pre-defined value from this spec. Pre-defined values include: ([View Highlight](https://read.readwise.io/read/01gx1n5gfr289grhkp9h7806r8))
- utilization ([View Highlight](https://read.readwise.io/read/01gx1n5h70g03r9ca8sg350mmg))
- responseTime ([View Highlight](https://read.readwise.io/read/01gx1n5ht8zm1pvfr47qbp5nvw))
- connections ([View Highlight](https://read.readwise.io/read/01gx1n5jsskzw5qvav8j9050p7))
- uptime ([View Highlight](https://read.readwise.io/read/01gx1n5kh1zwwfheyz2e98wr30))
- A common and standard term from a well-known source such as schema.org, IANA or microformats. ([View Highlight](https://read.readwise.io/read/01gx1n5m7s18j58b9v5vjpgbnj))
- A URI that indicates extra semantics and processing rules that MAY be provided by a resource at the other end of the URI. URIs do not have to be dereferenceable, however. They are just a namespace, and the meaning of a namespace CAN be provided by any convenient means (e.g. publishing an RFC, Open API Spec document or a nicely printed book). ([View Highlight](https://read.readwise.io/read/01gx1n5nrm03j4aqbj57qsf7pd))
- On the value side of the equation, each "component details" object in the array SHOULD have at least one key, and MAY have any or none of the following object keys: ([View Highlight](https://read.readwise.io/read/01gx1n5pnz415jvvm146c0pj2e))
- componentId: (optional) is a unique identifier of an instance of a specific sub-component/dependency of a service. Multiple objects with the same componentID MAY appear in the details, if they are from different nodes. ([View Highlight](https://read.readwise.io/read/01gx1n5r9ednncwq7fw69d1qzj))
- componentType: (optional) SHOULD be present if componentName is present. It's a type of the component and could be one of: ([View Highlight](https://read.readwise.io/read/01gx1n5s374jhys9sq1ytvy9xh))
- Pre-defined value from this spec. Pre-defined values include: ([View Highlight](https://read.readwise.io/read/01gx1n5t4qcv07gtgg27wvak05))
- component ([View Highlight](https://read.readwise.io/read/01gx1n5tz53jgt29fen6e91j6z))
- datastore ([View Highlight](https://read.readwise.io/read/01gx1n5vp3shegh88bcy4vprm4))
- system ([View Highlight](https://read.readwise.io/read/01gx1n5yzzgds00dm10sbqyzwc))
- A common and standard term from a well-known source such as schema.org, IANA or microformats. ([View Highlight](https://read.readwise.io/read/01gx1n5y17c6tr5c6266tz8cp6))
- A URI that indicates extra semantics and processing rules that MAY be provided by a resource at the other end of the URI. URIs do not have to be dereferenceable, however. They are just a namespace, and the meaning of a namespace CAN be provided by any convenient means (e.g. publishing an RFC, Swagger document or a nicely printed book). ([View Highlight](https://read.readwise.io/read/01gx1n60hrhmfq9kp4tjv9m41s))
- observedValue: (optional) could be any valid JSON value, such as: string, number, object, array or literal. ([View Highlight](https://read.readwise.io/read/01gx1n627fdb3f63rx0z309h4k))
- observedUnit (optional) SHOULD be present if observedValue is present. Clarifies the unit of measurement in which observedUnit is reported, e.g. for a time-based value it is important to know whether the time is reported in seconds, minutes, hours or something else. To make sure unit is denoted by a well-understood name or an abbreviation, it SHOULD be one of: ([View Highlight](https://read.readwise.io/read/01gx1n631r4y9n6evqvjb0r9aj))
- status (optional) has the exact same meaning as the top-level "output" element, but for the sub-component/downstream dependency represented by the details object. ([View Highlight](https://read.readwise.io/read/01gx1n64y6c61kyg6rjf0taeqj))
- affectedEndpoints (optional) is a JSON array containing URI Templates as defined by [[RFC6570](https://inadarei.github.io/rfc-healthcheck/#RFC6570)]. This field SHOULD be omitted if the "status" field is present and has value equal to "pass". A typical API has many URI endpoints. Most of the time we are interested in the overall health of the API, without diving into details. That said, sometimes operational and resilience middleware needs to know more details about the health of the API (which is why "checks" property provides details). In such cases, we often need to indicate which particular endpoints are affected by a particular check's troubles vs. other endpoints that may be fine. ([View Highlight](https://read.readwise.io/read/01gx1n65rgrn19fspkthm1p510))
- time (optional) is the date-time, in ISO8601 format, at which the reading of the observedValue was recorded. This assumes that the value can be cached and the reading typically doesn't happen in real time, for performance and scalability purposes. ([View Highlight](https://read.readwise.io/read/01gx1n67972qbt0bpsg9y3x1n3))
- output (optional) has the exact same meaning as the top-level "output" element, but for the sub-component/downstream dependency represented by the details object. As is the case for the top-level element, this field SHOULD be omitted for "pass" state of a downstream dependency. ([View Highlight](https://read.readwise.io/read/01gx1n683v252q1q11htgre7vb))
- links (optional) has the exact same meaning as the top-level "output" element, but for the sub-component/downstream dependency represented by the details object. ([View Highlight](https://read.readwise.io/read/01gx1n69fnpmzj3nyn996x5b5n))
- In addition to the above keys, additional user-defined keys MAY be included in the 'component details' object. Implementations MAY ignore any keys that are not part of the list of standard keys above. ([View Highlight](https://read.readwise.io/read/01gx1n6aaj64tw9h855n94ky0v))
- GET /health HTTP/1.1 Host: example.org Accept: application/health+json HTTP/1.1 200 OK Content-Type: application/health+json Cache-Control: max-age=3600 Connection: close { "status": "pass", "version": "1", "releaseId": "1.2.2", "notes": [""], "output": "", "serviceId": "f03e522f-1f44-4062-9b55-9587f91c9c41", "description": "health of authz service", "checks": { "cassandra:responseTime": [ { "componentId": "dfd6cf2b-1b6e-4412-a0b8-f6f7797a60d2", "componentType": "datastore", "observedValue": 250, "observedUnit": "ms", "status": "pass", "affectedEndpoints" : [ "/users/{userId}", "/customers/{customerId}/status", "/shopping/{anything}" ], "time": "2018-01-17T03:36:48Z", "output": "" } ], "cassandra:connections": [ { "componentId": "dfd6cf2b-1b6e-4412-a0b8-f6f7797a60d2", "componentType": "datastore", "observedValue": 75, "status": "warn", "time": "2018-01-17T03:36:48Z", "output": "", "links": { "self": "http://api.example.com/dbnode/dfd6cf2b/health" } } ], "uptime": [ { "componentType": "system", "observedValue": 1209600.245, "observedUnit": "s", "status": "pass", "time": "2018-01-17T03:36:48Z" } ], "cpu:utilization": [ { "componentId": "6fd416e0-8920-410f-9c7b-c479000f7227", "node": 1, "componentType": "system", "observedValue": 85, "observedUnit": "percent", "status": "warn", "time": "2018-01-17T03:36:48Z", "output": "" }, { "componentId": "6fd416e0-8920-410f-9c7b-c479000f7227", "node": 2, "componentType": "system", "observedValue": 85, "observedUnit": "percent", "status": "warn", "time": "2018-01-17T03:36:48Z", "output": "" } ], "memory:utilization": [ { "componentId": "6fd416e0-8920-410f-9c7b-c479000f7227", "node": 1, "componentType": "system", "observedValue": 8.5, "observedUnit": "GiB", "status": "warn", "time": "2018-01-17T03:36:48Z", "output": "" }, { "componentId": "6fd416e0-8920-410f-9c7b-c479000f7227", "node": 2, "componentType": "system", "observedValue": 5500, "observedUnit": "MiB", "status": "pass", "time": "2018-01-17T03:36:48Z", "output": "" } ] }, "links": { "about": "http://api.example.com/about/authz", "http://api.x.io/rel/thresholds": "http://api.x.io/about/authz/thresholds" } } ([View Highlight](https://read.readwise.io/read/01gx1n70cr13fnxkwkh4sds4qg))
- Clients need to exercise care when reporting health information. Malicious actors could use this information for orchestrating attacks. In some cases, the health check endpoints may need to be authenticated and institute role-based access control. ([View Highlight](https://read.readwise.io/read/01gx1n744tbx03wexac5gfmj4f))
- The media type for health check response is application/health+json. ([View Highlight](https://read.readwise.io/read/01gx1n780sprw72j388nvych2k))
- Media type name: application ([View Highlight](https://read.readwise.io/read/01gx1n7cb4bzk884adbwpvajk3))
- Media subtype name: health+json ([View Highlight](https://read.readwise.io/read/01gx1n7d50pfkzrrxet17wf8dk))
- Encoding considerations: binary ([View Highlight](https://read.readwise.io/read/01gx1n7fzzqz38aqmp6arg8ct7))
- Security considerations: Health+JSON shares security issues common to all JSON content types. See RFC 8259 Section #12 for additional information. ([View Highlight](https://read.readwise.io/read/01gx1n7hatag6tt7sh7350ytkq))
- Health+JSON allows utilization of Uniform Resource Identifiers (URIs) and as such shares security issues common to URI usage. See RFC 3986 Section #7 for additional information. ([View Highlight](https://read.readwise.io/read/01gx1n7jr69vayrvvgwmzjjq48))
- Since health+json can carry wide variety of data, some data may require privacy or integrity services. This specification does not prescribe any specific solution and assumes that concrete implementations will utilize common, trusted approaches such as TLS/HTTPS, OAuth2 etc. ([View Highlight](https://read.readwise.io/read/01gx1n7kqjj3c40veajgbx0rdn))
- When making an health check endpoint available, there are a few things to keep in mind: ([View Highlight](https://read.readwise.io/read/01gx1n7tz2qgwbcart8jwprjyq))
- A health response endpoint is best located at a memorable and commonly-used URI, such as "health" because it will help self-discoverability by clients. ([View Highlight](https://read.readwise.io/read/01gx1n7x92ektsj1fhzv1773bh))
- Health check responses can be personalized. For example, you could advertise different URIs, and/or different kinds of link relations, to afford different clients access to additional health check information. ([View Highlight](https://read.readwise.io/read/01gx1n83yexjepzr8gnk802edd))
- Health check responses SHOULD be assigned a freshness lifetime (e.g., "Cache-Control: max-age=3600") so that clients can determine how long they could cache them, to avoid overly frequent fetching and unintended DDOS-ing of the service. Any method of cache lifetime negotiation provided by HTTP spec is acceptable (e.g. ETags are just fine). ([View Highlight](https://read.readwise.io/read/01gx1n86setn8jqr6j4hykgjfe))
- Custom link relation types, as well as the URIs for variables, SHOULD lead to documentation for those constructs. ([View Highlight](https://read.readwise.io/read/01gx1n8af3dfty1z493j8cfp5r))
