/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

const ICON_LIST = ['activity', 'airplay', 'alarm-check', 'alarm-clock-off', 'alarm-clock', 'alarm-minus', 'alarm-plus', 'album', 'alert-circle', 'alert-octagon', 'alert-triangle', 'align-left', 'align-right', 'align-center', 'align-justify', 'anchor', 'aperture', 'archive', 'arrow-big-down', 'arrow-big-left', 'arrow-big-right', 'arrow-big-up', 'arrow-down-circle', 'arrow-down-left', 'arrow-down-right', 'arrow-down', 'arrow-left-circle', 'arrow-left-right', 'arrow-left', 'arrow-right-circle', 'arrow-right', 'arrow-up-circle', 'arrow-up-left', 'arrow-up-right', 'arrow-up', 'asterisk', 'at-sign', 'award', 'axe', 'banknote', 'bar-chart-2', 'bar-chart', 'battery-charging', 'battery-full', 'battery-low', 'battery-medium', 'battery', 'beaker', 'bell-minus', 'bell-off', 'bell-plus', 'bell-ring', 'bell', 'bike', 'binary', 'bitcoin', 'bluetooth-connected', 'bluetooth-off', 'bluetooth-searching', 'bluetooth', 'bold', 'book-open', 'book', 'bookmark-minus', 'bookmark-plus', 'bookmark', 'bot', 'box-select', 'box', 'briefcase', 'brush', 'bug', 'building', 'bus', 'calculator', 'calendar', 'camera-off', 'camera', 'car', 'carrot', 'cast', 'check-circle-2', 'check-circle', 'check-square', 'check', 'chevron-down', 'chevron-first', 'chevron-last', 'chevron-left', 'chevron-right', 'chevron-up', 'chevrons-down-up', 'chevrons-down', 'chevrons-left', 'chevrons-right', 'chevrons-up-down', 'chevrons-up', 'chrome', 'circle-slashed', 'circle', 'clipboard-check', 'clipboard-copy', 'clipboard-list', 'clipboard-x', 'clipboard', 'clock-1', 'clock-10', 'clock-11', 'clock-12', 'clock-2', 'clock-3', 'clock-4', 'clock-5', 'clock-6', 'clock-7', 'clock-8', 'clock-9', 'clock', 'cloud-drizzle', 'cloud-fog', 'cloud-hail', 'cloud-lightning', 'cloud-moon', 'cloud-off', 'cloud-rain-wind', 'cloud-rain', 'cloud-snow', 'cloud-sun', 'cloud', 'cloudy', 'clover', 'code-2', 'code', 'codepen', 'codesandbox', 'coffee', 'coins', 'columns', 'command', 'compass', 'contact', 'contrast', 'cookie', 'copy', 'copyleft', 'copyright', 'corner-down-left', 'corner-down-right', 'corner-left-down', 'corner-left-up', 'corner-right-down', 'corner-right-up', 'corner-up-left', 'corner-up-right', 'cpu', 'credit-card', 'crop', 'cross', 'crosshair', 'crown', 'currency', 'database', 'delete', 'dice', 'disc', 'divide-circle', 'divide-square', 'divide', 'dollar-sign', 'download-cloud', 'download', 'dribbble', 'droplet', 'droplets', 'drumstick', 'edit-2', 'edit-3', 'edit', 'egg', 'equal-not', 'equal', 'eraser', 'euro', 'expand', 'external-link', 'eye-off', 'eye', 'facebook', 'fast-forward', 'feather', 'figma', 'file-check-2', 'file-check', 'file-code', 'file-digit', 'file-input', 'file-minus-2', 'file-minus', 'file-output', 'file-plus-2', 'file-plus', 'file-search', 'file-text', 'file-x-2', 'file-x', 'file', 'files', 'film', 'filter', 'flag-triangle-left', 'flag-triangle-right', 'flag', 'flame', 'flashlight-off', 'flashlight', 'flask-conical', 'flask-round', 'folder-minus', 'folder-open', 'folder-plus', 'folder', 'form-input', 'forward', 'framer', 'frown', 'function-square', 'gamepad-2', 'gamepad', 'gauge', 'gavel', 'gem', 'ghost', 'gift', 'git-branch-plus', 'git-branch', 'git-commit', 'git-merge', 'git-pull-request', 'github', 'gitlab', 'glasses', 'globe-2', 'globe', 'grab', 'graduation-cap', 'grid', 'grip-horizontal', 'grip-vertical', 'hammer', 'hand-metal', 'hand', 'hard-drive', 'hard-hat', 'hash', 'haze', 'headphones', 'heart', 'help-circle', 'hexagon', 'highlighter', 'history', 'home', 'image-minus', 'image-off', 'image-plus', 'image', 'import', 'inbox', 'indent', 'indian-rupee', 'infinity', 'info', 'inspect', 'instagram', 'italic', 'japanese-yen', 'key', 'landmark', 'languages', 'laptop-2', 'laptop', 'lasso-select', 'lasso', 'layers', 'layout-dashboard', 'layout-grid', 'layout-list', 'layout-template', 'layout', 'library', 'life-buoy', 'lightbulb-off', 'lightbulb', 'link-2-off', 'link-2', 'link', 'linkedin', 'list-checks', 'list-minus', 'list-ordered', 'list-plus', 'list-x', 'list', 'loader-2', 'loader', 'locate-fixed', 'locate', 'lock', 'log-in', 'log-out', 'mail', 'map-pin', 'map', 'maximize-2', 'maximize', 'megaphone', 'meh', 'message-circle', 'message-square', 'mic-off', 'mic', 'minimize-2', 'minimize', 'minus-circle', 'minus-square', 'minus', 'monitor-off', 'monitor-speaker', 'monitor', 'moon', 'more-horizontal', 'more-vertical', 'mountain-snow', 'mountain', 'mouse-pointer-2', 'mouse-pointer-click', 'mouse-pointer', 'move-diagonal-2', 'move-diagonal', 'move-horizontal', 'move-vertical', 'move', 'music', 'navigation-2', 'navigation', 'network', 'octagon', 'option', 'outdent', 'package-check', 'package-minus', 'package-plus', 'package-search', 'package-x', 'package', 'palette', 'paperclip', 'pause-circle', 'pause-octagon', 'pause', 'pen-tool', 'pencil', 'percent', 'person-standing', 'phone-call', 'phone-forwarded', 'phone-incoming', 'phone-missed', 'phone-off', 'phone-outgoing', 'phone', 'pie-chart', 'piggy-bank', 'pin', 'pipette', 'plane', 'play-circle', 'play', 'plug-zap', 'plus-circle', 'plus-square', 'plus', 'pocket', 'podcast', 'pointer', 'pound-sterling', 'power-off', 'power', 'printer', 'qr-code', 'quote', 'radio-receiver', 'radio', 'redo', 'refresh-ccw', 'refresh-cw', 'regex', 'repeat-1', 'repeat', 'reply-all', 'reply', 'rewind', 'rocking-chair', 'rotate-ccw', 'rotate-cw', 'rss', 'ruler', 'russian-ruble', 'save', 'scale', 'scan-line', 'scan', 'scissors', 'screen-share-off', 'screen-share', 'search', 'send', 'separator-horizontal', 'separator-vertical', 'server-crash', 'server-off', 'server', 'settings-2', 'settings', 'share-2', 'share', 'sheet', 'shield-alert', 'shield-check', 'shield-close', 'shield-off', 'shield', 'shirt', 'shopping-bag', 'shopping-cart', 'shovel', 'shrink', 'shuffle', 'sidebar-close', 'sidebar-open', 'sidebar', 'sigma', 'signal-high', 'signal-low', 'signal-medium', 'signal-zero', 'signal', 'skip-back', 'skip-forward', 'skull', 'slack', 'slash', 'sliders', 'smartphone-charging', 'smartphone', 'smile', 'snowflake', 'sort-asc', 'sort-desc', 'speaker', 'sprout', 'square', 'star-half', 'star', 'stop-circle', 'strikethrough', 'subscript', 'sun', 'sunrise', 'sunset', 'superscript', 'swiss-franc', 'switch-camera', 'table', 'tablet', 'target', 'tent', 'terminal-square', 'terminal', 'text-cursor-input', 'text-cursor', 'thermometer-snowflake', 'thermometer-sun', 'thermometer', 'thumbs-down', 'thumbs-up', 'ticket', 'timer-off', 'timer-reset', 'timer', 'toggle-left', 'toggle-right', 'tornado', 'trash-2', 'trash', 'trello', 'trending-down', 'trending-up', 'triangle', 'truck', 'tv-2', 'tv', 'twitch', 'twitter', 'type', 'umbrella', 'underline', 'undo', 'unlink-2', 'unlink', 'unlock', 'upload-cloud', 'upload', 'user-check', 'user-minus', 'user-plus', 'user-x', 'user', 'users', 'verified', 'vibrate', 'video-off', 'video', 'view', 'voicemail', 'volume-1', 'volume-2', 'volume-x', 'volume', 'wallet', 'wand', 'watch', 'webcam', 'wifi-off', 'wifi', 'wind', 'wrap-text', 'wrench', 'x-circle', 'x-octagon', 'x-square', 'x', 'youtube', 'zap-off', 'zap', 'zoom-in', 'zoom-out', 'lucide-clock', 'lucide-cloud', 'lucide-cross', 'lucide-folder', 'lucide-info', 'lucide-languages', 'lucide-link', 'lucide-pencil', 'lucide-pin', 'lucide-search', 'lucide-star', 'lucide-trash'];

//From https://github.com/phibr0/obsidian-macros/blob/a56fb9a7259564a9345e0d1ed0af4331f4dba104/src/ui/iconPicker.ts#L4
class IconPicker extends obsidian.FuzzySuggestModal {
    constructor(plugin, command, modal) {
        super(plugin.app);
        this.plugin = plugin;
        this.command = command;
        this.modal = modal;
        this.setPlaceholder("Pick an icon");
    }
    cap(string) {
        const words = string.split(" ");
        return words.map((word) => {
            return word[0].toUpperCase() + word.substring(1);
        }).join(" ");
    }
    getItems() {
        return ICON_LIST;
    }
    getItemText(item) {
        return this.cap(item.replace(/-/ig, " "));
    }
    renderSuggestion(item, el) {
        el.addClass("URI-icon-container");
        const div = createDiv({ cls: "URI-icon" });
        el.appendChild(div);
        obsidian.setIcon(div, item.item);
        super.renderSuggestion(item, el);
    }
    onChooseItem(item) {
        this.command.icon = item;
        this.modal.display();
        this.close();
    }
}

class URIModal extends obsidian.Modal {
    constructor(plugin, settingTab, command = null, editMode = false) {
        super(plugin.app);
        this.settingTab = settingTab;
        this.plugin = plugin;
        this.editMode = editMode;
        if (command === null) {
            this.uriCommand = {
                name: "",
                id: "",
                URITemplate: "",
                encode: true,
            };
        }
        else {
            this.uriCommand = command;
        }
    }
    onOpen() {
        this.display();
    }
    display() {
        let { contentEl } = this;
        contentEl.empty();
        new obsidian.Setting(contentEl)
            .setName("Command name")
            .addText((textEl) => {
            textEl.setValue(this.uriCommand.name)
                .onChange((value) => {
                this.uriCommand.name = value;
            });
        });
        new obsidian.Setting(contentEl)
            .setName("URI")
            .setDesc("Accepts {{fileName}}, {{fileText}}, {{selection}}, {{line}}, {{filePath}}, {{vaultName}} and {{meta:FIELD_NAME}} placeholders.")
            .addText((textEl) => {
            textEl.setValue(this.uriCommand.URITemplate)
                .onChange((value) => {
                this.uriCommand.URITemplate = value;
            });
        });
        //heavily borrowing https://github.com/phibr0/obsidian-macros/blob/master/src/ui/macroModal.ts#L66
        new obsidian.Setting(contentEl)
            .setName("Add icon")
            .setDesc("Optional")
            .addButton(button => {
            if (this.uriCommand.icon) { //button looks like the existing icon
                button.setIcon(this.uriCommand.icon);
            }
            else { //or if no existing icon
                button.setButtonText("Pick icon");
            }
            button.onClick(() => {
                new IconPicker(this.plugin, this.uriCommand, this).open();
            });
        });
        new obsidian.Setting(contentEl)
            .setName("URL-encode input")
            .setDesc("Automatically URL-encode any user input text. Should only be off if content is already encoded or itself a URI scheme (e.g.. a bare URL with https://).")
            .addToggle(toggle => {
            toggle.setValue(this.uriCommand.encode)
                .onChange(value => {
                this.uriCommand.encode = value;
            });
        });
        //https://github.com/phibr0/obsidian-macros/blob/master/src/ui/macroModal.ts#L132
        const buttonDiv = contentEl.createDiv({ cls: "URI-flex-center" });
        const saveButton = createEl("button", { text: "Save command" });
        buttonDiv.appendChild(saveButton);
        saveButton.onClickEvent(() => __awaiter(this, void 0, void 0, function* () {
            if (this.editMode === false) { //creating a new command
                //replace spaces with - and add unix millisec timestamp (to ensure uniqueness)
                this.uriCommand.id = this.uriCommand.name.trim().replace(" ", "-").toLowerCase() + obsidian.moment().valueOf();
                this.plugin.settings.URICommands.push(this.uriCommand);
                this.plugin.addURICommand(this.uriCommand);
            }
            else { //remove and readd command, works around forcing the user to reload the entire app
                this.app.commands.removeCommand(`${this.plugin.manifest.id}:${this.uriCommand.id}`);
                this.plugin.addURICommand(this.uriCommand);
            }
            yield this.plugin.saveSettings();
            this.settingTab.display(); //refresh settings tab
            this.close();
        }));
    }
    onClose() {
        let { contentEl } = this;
        contentEl.empty();
    }
}

const DEFAULT_SETTINGS = {
    URICommands: [],
    notification: false,
};
//borrowed in part from phibr0's Customizable Sidebar plugin
class URISettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        containerEl.createEl('h2', { text: 'Commands' });
        new obsidian.Setting(containerEl)
            .setName("Add URI")
            .setDesc("Add a new URI to the command palette")
            .addButton((button) => {
            button.setButtonText("Add Command")
                .onClick(() => {
                new URIModal(this.plugin, this).open();
            });
        });
        this.plugin.settings.URICommands.forEach(command => {
            if (command === null) { //this should *not* happen
                this.plugin.settings.URICommands.remove(command);
                console.log("Command was null, removing.");
                return;
            }
            let iconDiv;
            if (command.icon) { //do want the "if null or empty string or undefined or etc" behavior
                iconDiv = createDiv({ cls: "URI-settings-icon" });
                obsidian.setIcon(iconDiv, command.icon, 20);
            }
            const setting = new obsidian.Setting(containerEl)
                .setName(command.name)
                .setDesc(command.URITemplate)
                .addExtraButton(button => {
                button.setIcon("trash")
                    .setTooltip("Remove command")
                    .onClick(() => __awaiter(this, void 0, void 0, function* () {
                    // Unregister the command from the palette
                    this.app.commands.removeCommand(`${this.plugin.manifest.id}:${command.id}`);
                    this.plugin.settings.URICommands.remove(command);
                    yield this.plugin.saveSettings();
                    this.display();
                }));
            })
                .addExtraButton(button => {
                button.setIcon("gear")
                    .setTooltip("Edit command")
                    .onClick(() => {
                    new URIModal(this.plugin, this, command, true).open();
                });
            });
            if (command.icon) {
                setting.nameEl.prepend(iconDiv);
            }
            setting.nameEl.addClass("URI-flex");
        });
        containerEl.createEl('h2', { text: 'Settings' });
        new obsidian.Setting(containerEl)
            .setName("Notification on launch")
            .setDesc("Display a notification with the command URI on launch.")
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.notification)
                .onChange(value => {
                this.plugin.settings.notification = value;
                this.plugin.saveSettings();
            });
        });
    }
}

const SELECTION_TEMPLATE = "{{selection}}";
const FILE_TEXT_TEMPLATE = "{{fileText}}";
const FILE_NAME_TEMPLATE = "{{fileName}}";
const LINE_TEMPLATE = "{{line}}";
const FILE_PATH_TEMPLATE = "{{filePath}}";
const VAULT_NAME_TEMPLATE = "{{vaultName}}";
const METADATA_REGEX = /{{meta:([^}]*)}}/; //note that this will *not* match if the metadata name has a } in it
const editorTemplates = [SELECTION_TEMPLATE, LINE_TEMPLATE]; // templates that require an editor to extract
const fileTemplates = [FILE_NAME_TEMPLATE, FILE_TEXT_TEMPLATE, FILE_PATH_TEMPLATE]; // templates that require an active file (but not an editor)
class URIPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log('Loading URI commands...');
            yield this.loadSettings();
            this.addSettingTab(new URISettingTab(this.app, this));
            this.addCommands();
        });
    }
    onunload() {
        console.log('Unloading URI commands');
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
    addCommands() {
        this.settings.URICommands.forEach(command => {
            this.addURICommand(command);
        });
    }
    addURICommand(command) {
        this.addCommand({
            id: command.id,
            name: command.name,
            icon: command.icon,
            checkCallback: (check) => {
                const view = this.app.workspace.getActiveViewOfType(obsidian.MarkdownView);
                const file = this.app.workspace.getActiveFile();
                const editor = view === null || view === void 0 ? void 0 : view.editor;
                if (!editor) { //don't show commands that require an editor
                    const uriContainsEditorTemplates = editorTemplates.some(template => command.URITemplate.includes(template)); //https://stackoverflow.com/a/66980203
                    if (uriContainsEditorTemplates)
                        return false;
                }
                if (!file) { // don't show commands that require a file
                    const uriContainsFileTemplates = fileTemplates.some(template => command.URITemplate.includes(template));
                    if (uriContainsFileTemplates || METADATA_REGEX.test(command.URITemplate))
                        return false;
                }
                else if (file.extension !== "md") { // don't show commands that require a markdown file
                    if (command.URITemplate.includes(FILE_TEXT_TEMPLATE))
                        return false;
                }
                if (!check)
                    this.runCommand(command, editor, file);
                return true;
            }
        });
    }
    runCommand(command, editor, file) {
        return __awaiter(this, void 0, void 0, function* () {
            let uriString = command.URITemplate;
            if (METADATA_REGEX.test(uriString)) { //specified metadata values
                //checks if you can use metadata placeholder
                if (!this.app.plugins.plugins["metaedit"].api) {
                    new obsidian.Notice("Must have MetaEdit enabled to use metadata placeholders");
                    return;
                }
                //@ts-ignore
                const { getPropertyValue } = this.app.plugins.plugins["metaedit"].api;
                //for every instance of the placeholder: extract the name of the field, get the corresponding value, and replace the placeholder with the encoded value
                //https://stackoverflow.com/questions/432493/how-do-you-access-the-matched-groups-in-a-javascript-regular-expression
                let metadataMatch = METADATA_REGEX.exec(uriString); //grab a matched group, where match[0] is the full regex and match [1] is the (first) group
                while (metadataMatch !== null) { //loop through all the matched until exec() isn't spitting out any more
                    let metadataValue = yield getPropertyValue(metadataMatch[1], file);
                    if (!metadataValue) { //if this value doesn't exist on the file
                        new obsidian.Notice(`The field ${metadataMatch[1]} does not exist on this file.`);
                        return;
                    }
                    uriString = replacePlaceholder(command, uriString, metadataMatch[0], metadataValue);
                    metadataMatch = METADATA_REGEX.exec(uriString);
                }
            }
            if (uriString.includes(FILE_NAME_TEMPLATE)) { // base name of file
                uriString = replacePlaceholder(command, uriString, FILE_NAME_TEMPLATE, file.basename);
            }
            if (uriString.includes(FILE_TEXT_TEMPLATE)) { //entire text of file
                const fileText = yield this.app.vault.read(file);
                return replacePlaceholder(command, uriString, FILE_TEXT_TEMPLATE, fileText);
            }
            if (uriString.includes(SELECTION_TEMPLATE)) { //current selection
                uriString = replacePlaceholder(command, uriString, SELECTION_TEMPLATE, editor.getSelection()); //currently replaced with empty string if no selection
            }
            if (uriString.includes(LINE_TEMPLATE)) { //current line
                const currentLine = editor.getCursor().line;
                uriString = replacePlaceholder(command, uriString, LINE_TEMPLATE, editor.getLine(currentLine));
            }
            if (uriString.includes(FILE_PATH_TEMPLATE)) { //path inside the vault to the current file
                uriString = replacePlaceholder(command, uriString, FILE_PATH_TEMPLATE, file.path);
            }
            if (uriString.includes(VAULT_NAME_TEMPLATE)) { //name of the current vault
                uriString = replacePlaceholder(command, uriString, VAULT_NAME_TEMPLATE, this.app.vault.getName());
            }
            window.open(uriString);
            if (this.settings.notification === true) {
                new obsidian.Notice(`Opening ${uriString}`);
            }
        });
    }
}
function replacePlaceholder(command, uriString, placeholder, replacementString) {
    if (command.encode) {
        replacementString = encodeURIComponent(replacementString);
    }
    return uriString.replace(placeholder, replacementString);
}

module.exports = URIPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9pY29uX2xpc3QudHMiLCJzcmMvaWNvblBpY2tlci50cyIsInNyYy9VUklNb2RhbC50cyIsInNyYy9zZXR0aW5ncy50cyIsInNyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xyXG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcclxuICAgICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRJbihzdGF0ZSwgcmVjZWl2ZXIpIHtcclxuICAgIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgPT09IHN0YXRlIDogc3RhdGUuaGFzKHJlY2VpdmVyKTtcclxufVxyXG4iLCJleHBvcnQgY29uc3QgSUNPTl9MSVNUID0gWydhY3Rpdml0eScsICdhaXJwbGF5JywgJ2FsYXJtLWNoZWNrJywgJ2FsYXJtLWNsb2NrLW9mZicsICdhbGFybS1jbG9jaycsICdhbGFybS1taW51cycsICdhbGFybS1wbHVzJywgJ2FsYnVtJywgJ2FsZXJ0LWNpcmNsZScsICdhbGVydC1vY3RhZ29uJywgJ2FsZXJ0LXRyaWFuZ2xlJywgJ2FsaWduLWxlZnQnLCAnYWxpZ24tcmlnaHQnLCAnYWxpZ24tY2VudGVyJywgJ2FsaWduLWp1c3RpZnknLCAnYW5jaG9yJywgJ2FwZXJ0dXJlJywgJ2FyY2hpdmUnLCAnYXJyb3ctYmlnLWRvd24nLCAnYXJyb3ctYmlnLWxlZnQnLCAnYXJyb3ctYmlnLXJpZ2h0JywgJ2Fycm93LWJpZy11cCcsICdhcnJvdy1kb3duLWNpcmNsZScsICdhcnJvdy1kb3duLWxlZnQnLCAnYXJyb3ctZG93bi1yaWdodCcsICdhcnJvdy1kb3duJywgJ2Fycm93LWxlZnQtY2lyY2xlJywgJ2Fycm93LWxlZnQtcmlnaHQnLCAnYXJyb3ctbGVmdCcsICdhcnJvdy1yaWdodC1jaXJjbGUnLCAnYXJyb3ctcmlnaHQnLCAnYXJyb3ctdXAtY2lyY2xlJywgJ2Fycm93LXVwLWxlZnQnLCAnYXJyb3ctdXAtcmlnaHQnLCAnYXJyb3ctdXAnLCAnYXN0ZXJpc2snLCAnYXQtc2lnbicsICdhd2FyZCcsICdheGUnLCAnYmFua25vdGUnLCAnYmFyLWNoYXJ0LTInLCAnYmFyLWNoYXJ0JywgJ2JhdHRlcnktY2hhcmdpbmcnLCAnYmF0dGVyeS1mdWxsJywgJ2JhdHRlcnktbG93JywgJ2JhdHRlcnktbWVkaXVtJywgJ2JhdHRlcnknLCAnYmVha2VyJywgJ2JlbGwtbWludXMnLCAnYmVsbC1vZmYnLCAnYmVsbC1wbHVzJywgJ2JlbGwtcmluZycsICdiZWxsJywgJ2Jpa2UnLCAnYmluYXJ5JywgJ2JpdGNvaW4nLCAnYmx1ZXRvb3RoLWNvbm5lY3RlZCcsICdibHVldG9vdGgtb2ZmJywgJ2JsdWV0b290aC1zZWFyY2hpbmcnLCAnYmx1ZXRvb3RoJywgJ2JvbGQnLCAnYm9vay1vcGVuJywgJ2Jvb2snLCAnYm9va21hcmstbWludXMnLCAnYm9va21hcmstcGx1cycsICdib29rbWFyaycsICdib3QnLCAnYm94LXNlbGVjdCcsICdib3gnLCAnYnJpZWZjYXNlJywgJ2JydXNoJywgJ2J1ZycsICdidWlsZGluZycsICdidXMnLCAnY2FsY3VsYXRvcicsICdjYWxlbmRhcicsICdjYW1lcmEtb2ZmJywgJ2NhbWVyYScsICdjYXInLCAnY2Fycm90JywgJ2Nhc3QnLCAnY2hlY2stY2lyY2xlLTInLCAnY2hlY2stY2lyY2xlJywgJ2NoZWNrLXNxdWFyZScsICdjaGVjaycsICdjaGV2cm9uLWRvd24nLCAnY2hldnJvbi1maXJzdCcsICdjaGV2cm9uLWxhc3QnLCAnY2hldnJvbi1sZWZ0JywgJ2NoZXZyb24tcmlnaHQnLCAnY2hldnJvbi11cCcsICdjaGV2cm9ucy1kb3duLXVwJywgJ2NoZXZyb25zLWRvd24nLCAnY2hldnJvbnMtbGVmdCcsICdjaGV2cm9ucy1yaWdodCcsICdjaGV2cm9ucy11cC1kb3duJywgJ2NoZXZyb25zLXVwJywgJ2Nocm9tZScsICdjaXJjbGUtc2xhc2hlZCcsICdjaXJjbGUnLCAnY2xpcGJvYXJkLWNoZWNrJywgJ2NsaXBib2FyZC1jb3B5JywgJ2NsaXBib2FyZC1saXN0JywgJ2NsaXBib2FyZC14JywgJ2NsaXBib2FyZCcsICdjbG9jay0xJywgJ2Nsb2NrLTEwJywgJ2Nsb2NrLTExJywgJ2Nsb2NrLTEyJywgJ2Nsb2NrLTInLCAnY2xvY2stMycsICdjbG9jay00JywgJ2Nsb2NrLTUnLCAnY2xvY2stNicsICdjbG9jay03JywgJ2Nsb2NrLTgnLCAnY2xvY2stOScsICdjbG9jaycsICdjbG91ZC1kcml6emxlJywgJ2Nsb3VkLWZvZycsICdjbG91ZC1oYWlsJywgJ2Nsb3VkLWxpZ2h0bmluZycsICdjbG91ZC1tb29uJywgJ2Nsb3VkLW9mZicsICdjbG91ZC1yYWluLXdpbmQnLCAnY2xvdWQtcmFpbicsICdjbG91ZC1zbm93JywgJ2Nsb3VkLXN1bicsICdjbG91ZCcsICdjbG91ZHknLCAnY2xvdmVyJywgJ2NvZGUtMicsICdjb2RlJywgJ2NvZGVwZW4nLCAnY29kZXNhbmRib3gnLCAnY29mZmVlJywgJ2NvaW5zJywgJ2NvbHVtbnMnLCAnY29tbWFuZCcsICdjb21wYXNzJywgJ2NvbnRhY3QnLCAnY29udHJhc3QnLCAnY29va2llJywgJ2NvcHknLCAnY29weWxlZnQnLCAnY29weXJpZ2h0JywgJ2Nvcm5lci1kb3duLWxlZnQnLCAnY29ybmVyLWRvd24tcmlnaHQnLCAnY29ybmVyLWxlZnQtZG93bicsICdjb3JuZXItbGVmdC11cCcsICdjb3JuZXItcmlnaHQtZG93bicsICdjb3JuZXItcmlnaHQtdXAnLCAnY29ybmVyLXVwLWxlZnQnLCAnY29ybmVyLXVwLXJpZ2h0JywgJ2NwdScsICdjcmVkaXQtY2FyZCcsICdjcm9wJywgJ2Nyb3NzJywgJ2Nyb3NzaGFpcicsICdjcm93bicsICdjdXJyZW5jeScsICdkYXRhYmFzZScsICdkZWxldGUnLCAnZGljZScsICdkaXNjJywgJ2RpdmlkZS1jaXJjbGUnLCAnZGl2aWRlLXNxdWFyZScsICdkaXZpZGUnLCAnZG9sbGFyLXNpZ24nLCAnZG93bmxvYWQtY2xvdWQnLCAnZG93bmxvYWQnLCAnZHJpYmJibGUnLCAnZHJvcGxldCcsICdkcm9wbGV0cycsICdkcnVtc3RpY2snLCAnZWRpdC0yJywgJ2VkaXQtMycsICdlZGl0JywgJ2VnZycsICdlcXVhbC1ub3QnLCAnZXF1YWwnLCAnZXJhc2VyJywgJ2V1cm8nLCAnZXhwYW5kJywgJ2V4dGVybmFsLWxpbmsnLCAnZXllLW9mZicsICdleWUnLCAnZmFjZWJvb2snLCAnZmFzdC1mb3J3YXJkJywgJ2ZlYXRoZXInLCAnZmlnbWEnLCAnZmlsZS1jaGVjay0yJywgJ2ZpbGUtY2hlY2snLCAnZmlsZS1jb2RlJywgJ2ZpbGUtZGlnaXQnLCAnZmlsZS1pbnB1dCcsICdmaWxlLW1pbnVzLTInLCAnZmlsZS1taW51cycsICdmaWxlLW91dHB1dCcsICdmaWxlLXBsdXMtMicsICdmaWxlLXBsdXMnLCAnZmlsZS1zZWFyY2gnLCAnZmlsZS10ZXh0JywgJ2ZpbGUteC0yJywgJ2ZpbGUteCcsICdmaWxlJywgJ2ZpbGVzJywgJ2ZpbG0nLCAnZmlsdGVyJywgJ2ZsYWctdHJpYW5nbGUtbGVmdCcsICdmbGFnLXRyaWFuZ2xlLXJpZ2h0JywgJ2ZsYWcnLCAnZmxhbWUnLCAnZmxhc2hsaWdodC1vZmYnLCAnZmxhc2hsaWdodCcsICdmbGFzay1jb25pY2FsJywgJ2ZsYXNrLXJvdW5kJywgJ2ZvbGRlci1taW51cycsICdmb2xkZXItb3BlbicsICdmb2xkZXItcGx1cycsICdmb2xkZXInLCAnZm9ybS1pbnB1dCcsICdmb3J3YXJkJywgJ2ZyYW1lcicsICdmcm93bicsICdmdW5jdGlvbi1zcXVhcmUnLCAnZ2FtZXBhZC0yJywgJ2dhbWVwYWQnLCAnZ2F1Z2UnLCAnZ2F2ZWwnLCAnZ2VtJywgJ2dob3N0JywgJ2dpZnQnLCAnZ2l0LWJyYW5jaC1wbHVzJywgJ2dpdC1icmFuY2gnLCAnZ2l0LWNvbW1pdCcsICdnaXQtbWVyZ2UnLCAnZ2l0LXB1bGwtcmVxdWVzdCcsICdnaXRodWInLCAnZ2l0bGFiJywgJ2dsYXNzZXMnLCAnZ2xvYmUtMicsICdnbG9iZScsICdncmFiJywgJ2dyYWR1YXRpb24tY2FwJywgJ2dyaWQnLCAnZ3JpcC1ob3Jpem9udGFsJywgJ2dyaXAtdmVydGljYWwnLCAnaGFtbWVyJywgJ2hhbmQtbWV0YWwnLCAnaGFuZCcsICdoYXJkLWRyaXZlJywgJ2hhcmQtaGF0JywgJ2hhc2gnLCAnaGF6ZScsICdoZWFkcGhvbmVzJywgJ2hlYXJ0JywgJ2hlbHAtY2lyY2xlJywgJ2hleGFnb24nLCAnaGlnaGxpZ2h0ZXInLCAnaGlzdG9yeScsICdob21lJywgJ2ltYWdlLW1pbnVzJywgJ2ltYWdlLW9mZicsICdpbWFnZS1wbHVzJywgJ2ltYWdlJywgJ2ltcG9ydCcsICdpbmJveCcsICdpbmRlbnQnLCAnaW5kaWFuLXJ1cGVlJywgJ2luZmluaXR5JywgJ2luZm8nLCAnaW5zcGVjdCcsICdpbnN0YWdyYW0nLCAnaXRhbGljJywgJ2phcGFuZXNlLXllbicsICdrZXknLCAnbGFuZG1hcmsnLCAnbGFuZ3VhZ2VzJywgJ2xhcHRvcC0yJywgJ2xhcHRvcCcsICdsYXNzby1zZWxlY3QnLCAnbGFzc28nLCAnbGF5ZXJzJywgJ2xheW91dC1kYXNoYm9hcmQnLCAnbGF5b3V0LWdyaWQnLCAnbGF5b3V0LWxpc3QnLCAnbGF5b3V0LXRlbXBsYXRlJywgJ2xheW91dCcsICdsaWJyYXJ5JywgJ2xpZmUtYnVveScsICdsaWdodGJ1bGItb2ZmJywgJ2xpZ2h0YnVsYicsICdsaW5rLTItb2ZmJywgJ2xpbmstMicsICdsaW5rJywgJ2xpbmtlZGluJywgJ2xpc3QtY2hlY2tzJywgJ2xpc3QtbWludXMnLCAnbGlzdC1vcmRlcmVkJywgJ2xpc3QtcGx1cycsICdsaXN0LXgnLCAnbGlzdCcsICdsb2FkZXItMicsICdsb2FkZXInLCAnbG9jYXRlLWZpeGVkJywgJ2xvY2F0ZScsICdsb2NrJywgJ2xvZy1pbicsICdsb2ctb3V0JywgJ21haWwnLCAnbWFwLXBpbicsICdtYXAnLCAnbWF4aW1pemUtMicsICdtYXhpbWl6ZScsICdtZWdhcGhvbmUnLCAnbWVoJywgJ21lc3NhZ2UtY2lyY2xlJywgJ21lc3NhZ2Utc3F1YXJlJywgJ21pYy1vZmYnLCAnbWljJywgJ21pbmltaXplLTInLCAnbWluaW1pemUnLCAnbWludXMtY2lyY2xlJywgJ21pbnVzLXNxdWFyZScsICdtaW51cycsICdtb25pdG9yLW9mZicsICdtb25pdG9yLXNwZWFrZXInLCAnbW9uaXRvcicsICdtb29uJywgJ21vcmUtaG9yaXpvbnRhbCcsICdtb3JlLXZlcnRpY2FsJywgJ21vdW50YWluLXNub3cnLCAnbW91bnRhaW4nLCAnbW91c2UtcG9pbnRlci0yJywgJ21vdXNlLXBvaW50ZXItY2xpY2snLCAnbW91c2UtcG9pbnRlcicsICdtb3ZlLWRpYWdvbmFsLTInLCAnbW92ZS1kaWFnb25hbCcsICdtb3ZlLWhvcml6b250YWwnLCAnbW92ZS12ZXJ0aWNhbCcsICdtb3ZlJywgJ211c2ljJywgJ25hdmlnYXRpb24tMicsICduYXZpZ2F0aW9uJywgJ25ldHdvcmsnLCAnb2N0YWdvbicsICdvcHRpb24nLCAnb3V0ZGVudCcsICdwYWNrYWdlLWNoZWNrJywgJ3BhY2thZ2UtbWludXMnLCAncGFja2FnZS1wbHVzJywgJ3BhY2thZ2Utc2VhcmNoJywgJ3BhY2thZ2UteCcsICdwYWNrYWdlJywgJ3BhbGV0dGUnLCAncGFwZXJjbGlwJywgJ3BhdXNlLWNpcmNsZScsICdwYXVzZS1vY3RhZ29uJywgJ3BhdXNlJywgJ3Blbi10b29sJywgJ3BlbmNpbCcsICdwZXJjZW50JywgJ3BlcnNvbi1zdGFuZGluZycsICdwaG9uZS1jYWxsJywgJ3Bob25lLWZvcndhcmRlZCcsICdwaG9uZS1pbmNvbWluZycsICdwaG9uZS1taXNzZWQnLCAncGhvbmUtb2ZmJywgJ3Bob25lLW91dGdvaW5nJywgJ3Bob25lJywgJ3BpZS1jaGFydCcsICdwaWdneS1iYW5rJywgJ3BpbicsICdwaXBldHRlJywgJ3BsYW5lJywgJ3BsYXktY2lyY2xlJywgJ3BsYXknLCAncGx1Zy16YXAnLCAncGx1cy1jaXJjbGUnLCAncGx1cy1zcXVhcmUnLCAncGx1cycsICdwb2NrZXQnLCAncG9kY2FzdCcsICdwb2ludGVyJywgJ3BvdW5kLXN0ZXJsaW5nJywgJ3Bvd2VyLW9mZicsICdwb3dlcicsICdwcmludGVyJywgJ3FyLWNvZGUnLCAncXVvdGUnLCAncmFkaW8tcmVjZWl2ZXInLCAncmFkaW8nLCAncmVkbycsICdyZWZyZXNoLWNjdycsICdyZWZyZXNoLWN3JywgJ3JlZ2V4JywgJ3JlcGVhdC0xJywgJ3JlcGVhdCcsICdyZXBseS1hbGwnLCAncmVwbHknLCAncmV3aW5kJywgJ3JvY2tpbmctY2hhaXInLCAncm90YXRlLWNjdycsICdyb3RhdGUtY3cnLCAncnNzJywgJ3J1bGVyJywgJ3J1c3NpYW4tcnVibGUnLCAnc2F2ZScsICdzY2FsZScsICdzY2FuLWxpbmUnLCAnc2NhbicsICdzY2lzc29ycycsICdzY3JlZW4tc2hhcmUtb2ZmJywgJ3NjcmVlbi1zaGFyZScsICdzZWFyY2gnLCAnc2VuZCcsICdzZXBhcmF0b3ItaG9yaXpvbnRhbCcsICdzZXBhcmF0b3ItdmVydGljYWwnLCAnc2VydmVyLWNyYXNoJywgJ3NlcnZlci1vZmYnLCAnc2VydmVyJywgJ3NldHRpbmdzLTInLCAnc2V0dGluZ3MnLCAnc2hhcmUtMicsICdzaGFyZScsICdzaGVldCcsICdzaGllbGQtYWxlcnQnLCAnc2hpZWxkLWNoZWNrJywgJ3NoaWVsZC1jbG9zZScsICdzaGllbGQtb2ZmJywgJ3NoaWVsZCcsICdzaGlydCcsICdzaG9wcGluZy1iYWcnLCAnc2hvcHBpbmctY2FydCcsICdzaG92ZWwnLCAnc2hyaW5rJywgJ3NodWZmbGUnLCAnc2lkZWJhci1jbG9zZScsICdzaWRlYmFyLW9wZW4nLCAnc2lkZWJhcicsICdzaWdtYScsICdzaWduYWwtaGlnaCcsICdzaWduYWwtbG93JywgJ3NpZ25hbC1tZWRpdW0nLCAnc2lnbmFsLXplcm8nLCAnc2lnbmFsJywgJ3NraXAtYmFjaycsICdza2lwLWZvcndhcmQnLCAnc2t1bGwnLCAnc2xhY2snLCAnc2xhc2gnLCAnc2xpZGVycycsICdzbWFydHBob25lLWNoYXJnaW5nJywgJ3NtYXJ0cGhvbmUnLCAnc21pbGUnLCAnc25vd2ZsYWtlJywgJ3NvcnQtYXNjJywgJ3NvcnQtZGVzYycsICdzcGVha2VyJywgJ3Nwcm91dCcsICdzcXVhcmUnLCAnc3Rhci1oYWxmJywgJ3N0YXInLCAnc3RvcC1jaXJjbGUnLCAnc3RyaWtldGhyb3VnaCcsICdzdWJzY3JpcHQnLCAnc3VuJywgJ3N1bnJpc2UnLCAnc3Vuc2V0JywgJ3N1cGVyc2NyaXB0JywgJ3N3aXNzLWZyYW5jJywgJ3N3aXRjaC1jYW1lcmEnLCAndGFibGUnLCAndGFibGV0JywgJ3RhcmdldCcsICd0ZW50JywgJ3Rlcm1pbmFsLXNxdWFyZScsICd0ZXJtaW5hbCcsICd0ZXh0LWN1cnNvci1pbnB1dCcsICd0ZXh0LWN1cnNvcicsICd0aGVybW9tZXRlci1zbm93Zmxha2UnLCAndGhlcm1vbWV0ZXItc3VuJywgJ3RoZXJtb21ldGVyJywgJ3RodW1icy1kb3duJywgJ3RodW1icy11cCcsICd0aWNrZXQnLCAndGltZXItb2ZmJywgJ3RpbWVyLXJlc2V0JywgJ3RpbWVyJywgJ3RvZ2dsZS1sZWZ0JywgJ3RvZ2dsZS1yaWdodCcsICd0b3JuYWRvJywgJ3RyYXNoLTInLCAndHJhc2gnLCAndHJlbGxvJywgJ3RyZW5kaW5nLWRvd24nLCAndHJlbmRpbmctdXAnLCAndHJpYW5nbGUnLCAndHJ1Y2snLCAndHYtMicsICd0dicsICd0d2l0Y2gnLCAndHdpdHRlcicsICd0eXBlJywgJ3VtYnJlbGxhJywgJ3VuZGVybGluZScsICd1bmRvJywgJ3VubGluay0yJywgJ3VubGluaycsICd1bmxvY2snLCAndXBsb2FkLWNsb3VkJywgJ3VwbG9hZCcsICd1c2VyLWNoZWNrJywgJ3VzZXItbWludXMnLCAndXNlci1wbHVzJywgJ3VzZXIteCcsICd1c2VyJywgJ3VzZXJzJywgJ3ZlcmlmaWVkJywgJ3ZpYnJhdGUnLCAndmlkZW8tb2ZmJywgJ3ZpZGVvJywgJ3ZpZXcnLCAndm9pY2VtYWlsJywgJ3ZvbHVtZS0xJywgJ3ZvbHVtZS0yJywgJ3ZvbHVtZS14JywgJ3ZvbHVtZScsICd3YWxsZXQnLCAnd2FuZCcsICd3YXRjaCcsICd3ZWJjYW0nLCAnd2lmaS1vZmYnLCAnd2lmaScsICd3aW5kJywgJ3dyYXAtdGV4dCcsICd3cmVuY2gnLCAneC1jaXJjbGUnLCAneC1vY3RhZ29uJywgJ3gtc3F1YXJlJywgJ3gnLCAneW91dHViZScsICd6YXAtb2ZmJywgJ3phcCcsICd6b29tLWluJywgJ3pvb20tb3V0JywgJ2x1Y2lkZS1jbG9jaycsICdsdWNpZGUtY2xvdWQnLCAnbHVjaWRlLWNyb3NzJywgJ2x1Y2lkZS1mb2xkZXInLCAnbHVjaWRlLWluZm8nLCAnbHVjaWRlLWxhbmd1YWdlcycsICdsdWNpZGUtbGluaycsICdsdWNpZGUtcGVuY2lsJywgJ2x1Y2lkZS1waW4nLCAnbHVjaWRlLXNlYXJjaCcsICdsdWNpZGUtc3RhcicsICdsdWNpZGUtdHJhc2gnXVxuIiwiLy9Gcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9waGlicjAvb2JzaWRpYW4tbWFjcm9zL2Jsb2IvYTU2ZmI5YTcyNTk1NjRhOTM0NWUwZDFlZDBhZjQzMzFmNGRiYTEwNC9zcmMvdWkvaWNvblBpY2tlci50cyNMNFxuXG5pbXBvcnQgeyBGdXp6eU1hdGNoLCBGdXp6eVN1Z2dlc3RNb2RhbCwgc2V0SWNvbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFVSSVBsdWdpbiBmcm9tIFwic3JjL21haW5cIjtcbmltcG9ydCB7IElDT05fTElTVCB9IGZyb20gXCIuL2ljb25fbGlzdFwiO1xuaW1wb3J0IHsgVVJJQ29tbWFuZCB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgVVJJTW9kYWwgZnJvbSBcIi4vVVJJTW9kYWxcIjtcblxuXG5leHBvcnQgY2xhc3MgSWNvblBpY2tlciBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPHN0cmluZz57XG4gICAgcGx1Z2luOiBVUklQbHVnaW47XG4gICAgY29tbWFuZDogVVJJQ29tbWFuZDtcbiAgICBtb2RhbDogVVJJTW9kYWw7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFVSSVBsdWdpbiwgY29tbWFuZDogVVJJQ29tbWFuZCwgbW9kYWw6IFVSSU1vZGFsKSB7XG4gICAgICAgIHN1cGVyKHBsdWdpbi5hcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5jb21tYW5kID0gY29tbWFuZDtcbiAgICAgICAgdGhpcy5tb2RhbCA9IG1vZGFsO1xuICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyKFwiUGljayBhbiBpY29uXCIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FwKHN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgd29yZHMgPSBzdHJpbmcuc3BsaXQoXCIgXCIpO1xuXG4gICAgICAgIHJldHVybiB3b3Jkcy5tYXAoKHdvcmQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB3b3JkWzBdLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnN1YnN0cmluZygxKTtcbiAgICAgICAgfSkuam9pbihcIiBcIik7XG4gICAgfVxuXG4gICAgZ2V0SXRlbXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gSUNPTl9MSVNUO1xuICAgIH1cblxuICAgIGdldEl0ZW1UZXh0KGl0ZW06IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhcChpdGVtLnJlcGxhY2UoLy0vaWcsIFwiIFwiKSk7XG4gICAgfVxuXG4gICAgcmVuZGVyU3VnZ2VzdGlvbihpdGVtOiBGdXp6eU1hdGNoPHN0cmluZz4sIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBlbC5hZGRDbGFzcyhcIlVSSS1pY29uLWNvbnRhaW5lclwiKTtcbiAgICAgICAgY29uc3QgZGl2ID0gY3JlYXRlRGl2KHsgY2xzOiBcIlVSSS1pY29uXCIgfSk7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIHNldEljb24oZGl2LCBpdGVtLml0ZW0pO1xuICAgICAgICBzdXBlci5yZW5kZXJTdWdnZXN0aW9uKGl0ZW0sIGVsKTtcbiAgICB9XG5cbiAgICBvbkNob29zZUl0ZW0oaXRlbTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29tbWFuZC5pY29uID0gaXRlbTtcbiAgICAgICAgdGhpcy5tb2RhbC5kaXNwbGF5KCk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBNb2RhbCwgU2V0dGluZywgbW9tZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBJY29uUGlja2VyIH0gZnJvbSBcIi4vaWNvblBpY2tlclwiO1xuaW1wb3J0IFVSSVBsdWdpbiBmcm9tIFwiLi9tYWluXCI7XG5pbXBvcnQgeyBVUklTZXR0aW5nVGFiLCBVUklDb21tYW5kIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVUklNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0c2V0dGluZ1RhYjogVVJJU2V0dGluZ1RhYjtcblx0cGx1Z2luOiBVUklQbHVnaW47XG5cdHVyaUNvbW1hbmQ6IFVSSUNvbW1hbmQ7XG5cdGVkaXRNb2RlOiBib29sZWFuO1xuXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogVVJJUGx1Z2luLCBzZXR0aW5nVGFiOiBVUklTZXR0aW5nVGFiLCBjb21tYW5kOiBVUklDb21tYW5kID0gbnVsbCwgZWRpdE1vZGUgPSBmYWxzZSkge1xuXHRcdHN1cGVyKHBsdWdpbi5hcHApO1xuXHRcdHRoaXMuc2V0dGluZ1RhYiA9IHNldHRpbmdUYWI7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5lZGl0TW9kZSA9IGVkaXRNb2RlO1xuXG5cdFx0aWYgKGNvbW1hbmQgPT09IG51bGwpIHtcblx0XHRcdHRoaXMudXJpQ29tbWFuZCA9IHtcblx0XHRcdFx0bmFtZTogXCJcIixcblx0XHRcdFx0aWQ6IFwiXCIsXG5cdFx0XHRcdFVSSVRlbXBsYXRlOiBcIlwiLFxuXHRcdFx0XHRlbmNvZGU6IHRydWUsXG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMudXJpQ29tbWFuZCA9IGNvbW1hbmQ7XG5cdFx0fVxuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdHRoaXMuZGlzcGxheSgpO1xuXHR9XG5cblx0ZGlzcGxheSgpIHtcblx0XHRsZXQge2NvbnRlbnRFbH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJDb21tYW5kIG5hbWVcIilcblx0XHRcdC5hZGRUZXh0KCh0ZXh0RWwpID0+IHtcblx0XHRcdFx0dGV4dEVsLnNldFZhbHVlKHRoaXMudXJpQ29tbWFuZC5uYW1lKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMudXJpQ29tbWFuZC5uYW1lID0gdmFsdWU7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiVVJJXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkFjY2VwdHMge3tmaWxlTmFtZX19LCB7e2ZpbGVUZXh0fX0sIHt7c2VsZWN0aW9ufX0sIHt7bGluZX19LCB7e2ZpbGVQYXRofX0sIHt7dmF1bHROYW1lfX0gYW5kIHt7bWV0YTpGSUVMRF9OQU1FfX0gcGxhY2Vob2xkZXJzLlwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHRFbCkgPT4ge1xuXHRcdFx0XHR0ZXh0RWwuc2V0VmFsdWUodGhpcy51cmlDb21tYW5kLlVSSVRlbXBsYXRlKVxuXHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy51cmlDb21tYW5kLlVSSVRlbXBsYXRlID0gdmFsdWU7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vaGVhdmlseSBib3Jyb3dpbmcgaHR0cHM6Ly9naXRodWIuY29tL3BoaWJyMC9vYnNpZGlhbi1tYWNyb3MvYmxvYi9tYXN0ZXIvc3JjL3VpL21hY3JvTW9kYWwudHMjTDY2XG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJBZGQgaWNvblwiKVxuXHRcdFx0LnNldERlc2MoXCJPcHRpb25hbFwiKVxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xuXHRcdFx0XHRpZiAodGhpcy51cmlDb21tYW5kLmljb24pIHsgLy9idXR0b24gbG9va3MgbGlrZSB0aGUgZXhpc3RpbmcgaWNvblxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKHRoaXMudXJpQ29tbWFuZC5pY29uKTtcblx0XHRcdFx0fSBlbHNlIHsgLy9vciBpZiBubyBleGlzdGluZyBpY29uXG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJQaWNrIGljb25cIik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0bmV3IEljb25QaWNrZXIodGhpcy5wbHVnaW4sIHRoaXMudXJpQ29tbWFuZCwgdGhpcykub3BlbigpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIlVSTC1lbmNvZGUgaW5wdXRcIilcblx0XHRcdC5zZXREZXNjKFwiQXV0b21hdGljYWxseSBVUkwtZW5jb2RlIGFueSB1c2VyIGlucHV0IHRleHQuIFNob3VsZCBvbmx5IGJlIG9mZiBpZiBjb250ZW50IGlzIGFscmVhZHkgZW5jb2RlZCBvciBpdHNlbGYgYSBVUkkgc2NoZW1lIChlLmcuLiBhIGJhcmUgVVJMIHdpdGggaHR0cHM6Ly8pLlwiKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy51cmlDb21tYW5kLmVuY29kZSlcblx0XHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy51cmlDb21tYW5kLmVuY29kZSA9IHZhbHVlO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHR9KVxuXG5cblx0XHQvL2h0dHBzOi8vZ2l0aHViLmNvbS9waGlicjAvb2JzaWRpYW4tbWFjcm9zL2Jsb2IvbWFzdGVyL3NyYy91aS9tYWNyb01vZGFsLnRzI0wxMzJcblx0XHRjb25zdCBidXR0b25EaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIlVSSS1mbGV4LWNlbnRlclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdXR0b24gPSBjcmVhdGVFbChcImJ1dHRvblwiLCB7dGV4dDogXCJTYXZlIGNvbW1hbmRcIn0pO1xuXHRcdGJ1dHRvbkRpdi5hcHBlbmRDaGlsZChzYXZlQnV0dG9uKTtcblxuXHRcdHNhdmVCdXR0b24ub25DbGlja0V2ZW50KGFzeW5jICgpID0+IHtcblx0XHRcdGlmICh0aGlzLmVkaXRNb2RlID09PSBmYWxzZSkgeyAvL2NyZWF0aW5nIGEgbmV3IGNvbW1hbmRcblx0XHRcdFx0Ly9yZXBsYWNlIHNwYWNlcyB3aXRoIC0gYW5kIGFkZCB1bml4IG1pbGxpc2VjIHRpbWVzdGFtcCAodG8gZW5zdXJlIHVuaXF1ZW5lc3MpXG5cdFx0XHRcdHRoaXMudXJpQ29tbWFuZC5pZCA9IHRoaXMudXJpQ29tbWFuZC5uYW1lLnRyaW0oKS5yZXBsYWNlKFwiIFwiLCBcIi1cIikudG9Mb3dlckNhc2UoKSArIG1vbWVudCgpLnZhbHVlT2YoKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuVVJJQ29tbWFuZHMucHVzaCh0aGlzLnVyaUNvbW1hbmQpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5hZGRVUklDb21tYW5kKHRoaXMudXJpQ29tbWFuZCk7XG5cdFx0XHR9IGVsc2UgeyAvL3JlbW92ZSBhbmQgcmVhZGQgY29tbWFuZCwgd29ya3MgYXJvdW5kIGZvcmNpbmcgdGhlIHVzZXIgdG8gcmVsb2FkIHRoZSBlbnRpcmUgYXBwXG5cdFx0XHRcdCh0aGlzLmFwcCBhcyBhbnkpLmNvbW1hbmRzLnJlbW92ZUNvbW1hbmQoYCR7dGhpcy5wbHVnaW4ubWFuaWZlc3QuaWR9OiR7dGhpcy51cmlDb21tYW5kLmlkfWApO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5hZGRVUklDb21tYW5kKHRoaXMudXJpQ29tbWFuZCk7XG5cdFx0XHR9XG5cblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0dGhpcy5zZXR0aW5nVGFiLmRpc3BsYXkoKTsgLy9yZWZyZXNoIHNldHRpbmdzIHRhYlxuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH0pO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0IFx0bGV0IHtjb250ZW50RWx9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufSIsImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTm90aWNlLCBzZXRJY29uLCBDb21tYW5kIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IFVSSVBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IFVSSU1vZGFsIGZyb20gJy4vVVJJTW9kYWwnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVSSUNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblx0VVJJVGVtcGxhdGU6IHN0cmluZztcbiAgICBlbmNvZGU6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVVJJUGx1Z2luU2V0dGluZ3Mge1xuXHRVUklDb21tYW5kczogVVJJQ29tbWFuZFtdO1xuICAgIG5vdGlmaWNhdGlvbjogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFVSSVBsdWdpblNldHRpbmdzID0ge1xuXHRVUklDb21tYW5kczogW10sXG4gICAgbm90aWZpY2F0aW9uOiBmYWxzZSxcbn1cblxuLy9ib3Jyb3dlZCBpbiBwYXJ0IGZyb20gcGhpYnIwJ3MgQ3VzdG9taXphYmxlIFNpZGViYXIgcGx1Z2luXG5leHBvcnQgY2xhc3MgVVJJU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFVSSVBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBVUklQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGxldCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdDb21tYW5kcycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFkZCBVUklcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQWRkIGEgbmV3IFVSSSB0byB0aGUgY29tbWFuZCBwYWxldHRlXCIpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidXR0b24pID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dChcIkFkZCBDb21tYW5kXCIpXG4gICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFVSSU1vZGFsKHRoaXMucGx1Z2luLCB0aGlzKS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuVVJJQ29tbWFuZHMuZm9yRWFjaChjb21tYW5kID0+IHtcblx0XHRcdGlmIChjb21tYW5kID09PSBudWxsKSB7IC8vdGhpcyBzaG91bGQgKm5vdCogaGFwcGVuXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlVSSUNvbW1hbmRzLnJlbW92ZShjb21tYW5kKTtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJDb21tYW5kIHdhcyBudWxsLCByZW1vdmluZy5cIilcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG4gICAgICAgICAgICBsZXQgaWNvbkRpdjogSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoY29tbWFuZC5pY29uKSB7IC8vZG8gd2FudCB0aGUgXCJpZiBudWxsIG9yIGVtcHR5IHN0cmluZyBvciB1bmRlZmluZWQgb3IgZXRjXCIgYmVoYXZpb3JcbiAgICAgICAgICAgICAgICBpY29uRGl2ID0gY3JlYXRlRGl2KHsgY2xzOiBcIlVSSS1zZXR0aW5ncy1pY29uXCIgfSk7XG4gICAgICAgICAgICAgICAgc2V0SWNvbihpY29uRGl2LCBjb21tYW5kLmljb24sIDIwKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoY29tbWFuZC5uYW1lKVxuXHRcdFx0XHQuc2V0RGVzYyhjb21tYW5kLlVSSVRlbXBsYXRlKVxuICAgICAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0SWNvbihcInRyYXNoXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiUmVtb3ZlIGNvbW1hbmRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVucmVnaXN0ZXIgdGhlIGNvbW1hbmQgZnJvbSB0aGUgcGFsZXR0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFwcCBhcyBhbnkpLmNvbW1hbmRzLnJlbW92ZUNvbW1hbmQoYCR7dGhpcy5wbHVnaW4ubWFuaWZlc3QuaWR9OiR7Y29tbWFuZC5pZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5VUklDb21tYW5kcy5yZW1vdmUoY29tbWFuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRJY29uKFwiZ2VhclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIkVkaXQgY29tbWFuZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFVSSU1vZGFsKHRoaXMucGx1Z2luLCB0aGlzLCBjb21tYW5kLCB0cnVlKS5vcGVuKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGNvbW1hbmQuaWNvbikge1xuICAgICAgICAgICAgICAgIHNldHRpbmcubmFtZUVsLnByZXBlbmQoaWNvbkRpdik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXR0aW5nLm5hbWVFbC5hZGRDbGFzcyhcIlVSSS1mbGV4XCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdTZXR0aW5ncycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIk5vdGlmaWNhdGlvbiBvbiBsYXVuY2hcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiRGlzcGxheSBhIG5vdGlmaWNhdGlvbiB3aXRoIHRoZSBjb21tYW5kIFVSSSBvbiBsYXVuY2guXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGlmaWNhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGlmaWNhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuXG5cblx0fVxufVxuIiwiaW1wb3J0IHsgRWRpdG9yLCBQbHVnaW4sIE5vdGljZSwgVEZpbGUsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVVJJU2V0dGluZ1RhYiwgVVJJUGx1Z2luU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MsIFVSSUNvbW1hbmQgfSBmcm9tICcuL3NldHRpbmdzJztcclxuXHJcbmNvbnN0IFNFTEVDVElPTl9URU1QTEFURSA9IFwie3tzZWxlY3Rpb259fVwiO1xyXG5jb25zdCBGSUxFX1RFWFRfVEVNUExBVEUgPSBcInt7ZmlsZVRleHR9fVwiO1xyXG5jb25zdCBGSUxFX05BTUVfVEVNUExBVEUgPSBcInt7ZmlsZU5hbWV9fVwiO1xyXG5jb25zdCBMSU5FX1RFTVBMQVRFID0gXCJ7e2xpbmV9fVwiO1xyXG5jb25zdCBGSUxFX1BBVEhfVEVNUExBVEUgPSBcInt7ZmlsZVBhdGh9fVwiXHJcbmNvbnN0IFZBVUxUX05BTUVfVEVNUExBVEUgPSBcInt7dmF1bHROYW1lfX1cIlxyXG5jb25zdCBNRVRBREFUQV9SRUdFWCA9IC97e21ldGE6KFtefV0qKX19LzsgLy9ub3RlIHRoYXQgdGhpcyB3aWxsICpub3QqIG1hdGNoIGlmIHRoZSBtZXRhZGF0YSBuYW1lIGhhcyBhIH0gaW4gaXRcclxuXHJcbmNvbnN0IGVkaXRvclRlbXBsYXRlcyA9IFtTRUxFQ1RJT05fVEVNUExBVEUsIExJTkVfVEVNUExBVEVdOyAgLy8gdGVtcGxhdGVzIHRoYXQgcmVxdWlyZSBhbiBlZGl0b3IgdG8gZXh0cmFjdFxyXG5jb25zdCBmaWxlVGVtcGxhdGVzID0gW0ZJTEVfTkFNRV9URU1QTEFURSwgRklMRV9URVhUX1RFTVBMQVRFLCBGSUxFX1BBVEhfVEVNUExBVEVdOyAvLyB0ZW1wbGF0ZXMgdGhhdCByZXF1aXJlIGFuIGFjdGl2ZSBmaWxlIChidXQgbm90IGFuIGVkaXRvcilcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVSSVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IFVSSVBsdWdpblNldHRpbmdzO1xyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdMb2FkaW5nIFVSSSBjb21tYW5kcy4uLicpO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFVSSVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmRzKCk7XHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdVbmxvYWRpbmcgVVJJIGNvbW1hbmRzJyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHRhZGRDb21tYW5kcygpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MuVVJJQ29tbWFuZHMuZm9yRWFjaChjb21tYW5kID0+IHtcclxuXHRcdFx0dGhpcy5hZGRVUklDb21tYW5kKGNvbW1hbmQpO1xyXG5cdFx0fSlcclxuXHR9XHJcblxyXG5cdGFkZFVSSUNvbW1hbmQoY29tbWFuZDogVVJJQ29tbWFuZCkge1xyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IGNvbW1hbmQuaWQsXHJcblx0XHRcdG5hbWU6IGNvbW1hbmQubmFtZSxcclxuXHRcdFx0aWNvbjogY29tbWFuZC5pY29uLFxyXG5cclxuXHRcdFx0Y2hlY2tDYWxsYmFjazogKGNoZWNrOiBib29sZWFuKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgdmlldzogTWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdFx0XHRjb25zdCBmaWxlOiBURmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0Y29uc3QgZWRpdG9yOiBFZGl0b3IgPSB2aWV3Py5lZGl0b3I7XHJcblx0XHRcdFx0aWYgKCFlZGl0b3IpIHsgLy9kb24ndCBzaG93IGNvbW1hbmRzIHRoYXQgcmVxdWlyZSBhbiBlZGl0b3JcclxuXHRcdFx0XHRcdGNvbnN0IHVyaUNvbnRhaW5zRWRpdG9yVGVtcGxhdGVzID0gZWRpdG9yVGVtcGxhdGVzLnNvbWUodGVtcGxhdGUgPT4gY29tbWFuZC5VUklUZW1wbGF0ZS5pbmNsdWRlcyh0ZW1wbGF0ZSkpOyAvL2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS82Njk4MDIwM1xyXG5cdFx0XHRcdFx0aWYgKHVyaUNvbnRhaW5zRWRpdG9yVGVtcGxhdGVzKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoIWZpbGUpIHsgLy8gZG9uJ3Qgc2hvdyBjb21tYW5kcyB0aGF0IHJlcXVpcmUgYSBmaWxlXHJcblx0XHRcdFx0XHRjb25zdCB1cmlDb250YWluc0ZpbGVUZW1wbGF0ZXMgPSBmaWxlVGVtcGxhdGVzLnNvbWUodGVtcGxhdGUgPT4gY29tbWFuZC5VUklUZW1wbGF0ZS5pbmNsdWRlcyh0ZW1wbGF0ZSkpO1xyXG5cdFx0XHRcdFx0aWYgKHVyaUNvbnRhaW5zRmlsZVRlbXBsYXRlcyB8fCBNRVRBREFUQV9SRUdFWC50ZXN0KGNvbW1hbmQuVVJJVGVtcGxhdGUpKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChmaWxlLmV4dGVuc2lvbiAhPT0gXCJtZFwiKSB7IC8vIGRvbid0IHNob3cgY29tbWFuZHMgdGhhdCByZXF1aXJlIGEgbWFya2Rvd24gZmlsZVxyXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmQuVVJJVGVtcGxhdGUuaW5jbHVkZXMoRklMRV9URVhUX1RFTVBMQVRFKSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCFjaGVjaykgdGhpcy5ydW5Db21tYW5kKGNvbW1hbmQsIGVkaXRvciwgZmlsZSk7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgcnVuQ29tbWFuZChjb21tYW5kOiBVUklDb21tYW5kLCBlZGl0b3I/OiBFZGl0b3IsIGZpbGU/OiBURmlsZSkge1xyXG5cdFx0bGV0IHVyaVN0cmluZyA9IGNvbW1hbmQuVVJJVGVtcGxhdGU7XHJcblxyXG5cdFx0aWYoTUVUQURBVEFfUkVHRVgudGVzdCh1cmlTdHJpbmcpKSB7IC8vc3BlY2lmaWVkIG1ldGFkYXRhIHZhbHVlc1xyXG5cdFx0XHQvL2NoZWNrcyBpZiB5b3UgY2FuIHVzZSBtZXRhZGF0YSBwbGFjZWhvbGRlclxyXG5cdFx0XHRpZiAoISh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMucGx1Z2luc1tcIm1ldGFlZGl0XCJdLmFwaSkge1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJNdXN0IGhhdmUgTWV0YUVkaXQgZW5hYmxlZCB0byB1c2UgbWV0YWRhdGEgcGxhY2Vob2xkZXJzXCIpXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL0B0cy1pZ25vcmVcclxuXHRcdFx0Y29uc3Qge2dldFByb3BlcnR5VmFsdWV9ID0gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zW1wibWV0YWVkaXRcIl0uYXBpO1xyXG5cclxuXHRcdFx0Ly9mb3IgZXZlcnkgaW5zdGFuY2Ugb2YgdGhlIHBsYWNlaG9sZGVyOiBleHRyYWN0IHRoZSBuYW1lIG9mIHRoZSBmaWVsZCwgZ2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlLCBhbmQgcmVwbGFjZSB0aGUgcGxhY2Vob2xkZXIgd2l0aCB0aGUgZW5jb2RlZCB2YWx1ZVxyXG5cdFx0XHQvL2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQzMjQ5My9ob3ctZG8teW91LWFjY2Vzcy10aGUtbWF0Y2hlZC1ncm91cHMtaW4tYS1qYXZhc2NyaXB0LXJlZ3VsYXItZXhwcmVzc2lvblxyXG5cdFx0XHRsZXQgbWV0YWRhdGFNYXRjaCA9IE1FVEFEQVRBX1JFR0VYLmV4ZWModXJpU3RyaW5nKTsgLy9ncmFiIGEgbWF0Y2hlZCBncm91cCwgd2hlcmUgbWF0Y2hbMF0gaXMgdGhlIGZ1bGwgcmVnZXggYW5kIG1hdGNoIFsxXSBpcyB0aGUgKGZpcnN0KSBncm91cFxyXG5cclxuXHRcdFx0d2hpbGUgKG1ldGFkYXRhTWF0Y2ggIT09IG51bGwpIHsgLy9sb29wIHRocm91Z2ggYWxsIHRoZSBtYXRjaGVkIHVudGlsIGV4ZWMoKSBpc24ndCBzcGl0dGluZyBvdXQgYW55IG1vcmVcclxuXHRcdFx0XHRsZXQgbWV0YWRhdGFWYWx1ZSA9IGF3YWl0IGdldFByb3BlcnR5VmFsdWUobWV0YWRhdGFNYXRjaFsxXSwgZmlsZSk7XHJcblx0XHRcdFx0aWYgKCFtZXRhZGF0YVZhbHVlKSB7IC8vaWYgdGhpcyB2YWx1ZSBkb2Vzbid0IGV4aXN0IG9uIHRoZSBmaWxlXHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBUaGUgZmllbGQgJHttZXRhZGF0YU1hdGNoWzFdfSBkb2VzIG5vdCBleGlzdCBvbiB0aGlzIGZpbGUuYClcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dXJpU3RyaW5nID0gcmVwbGFjZVBsYWNlaG9sZGVyKGNvbW1hbmQsIHVyaVN0cmluZywgbWV0YWRhdGFNYXRjaFswXSwgbWV0YWRhdGFWYWx1ZSk7XHJcblx0XHRcdFx0bWV0YWRhdGFNYXRjaCA9IE1FVEFEQVRBX1JFR0VYLmV4ZWModXJpU3RyaW5nKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh1cmlTdHJpbmcuaW5jbHVkZXMoRklMRV9OQU1FX1RFTVBMQVRFKSkgeyAvLyBiYXNlIG5hbWUgb2YgZmlsZVxyXG5cdFx0XHR1cmlTdHJpbmcgPSByZXBsYWNlUGxhY2Vob2xkZXIoY29tbWFuZCwgdXJpU3RyaW5nLCBGSUxFX05BTUVfVEVNUExBVEUsIGZpbGUuYmFzZW5hbWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh1cmlTdHJpbmcuaW5jbHVkZXMoRklMRV9URVhUX1RFTVBMQVRFKSkgeyAvL2VudGlyZSB0ZXh0IG9mIGZpbGVcclxuXHRcdFx0Y29uc3QgZmlsZVRleHQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0XHRyZXR1cm4gcmVwbGFjZVBsYWNlaG9sZGVyKGNvbW1hbmQsIHVyaVN0cmluZywgRklMRV9URVhUX1RFTVBMQVRFLCBmaWxlVGV4dCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHVyaVN0cmluZy5pbmNsdWRlcyhTRUxFQ1RJT05fVEVNUExBVEUpKSB7IC8vY3VycmVudCBzZWxlY3Rpb25cclxuXHRcdFx0dXJpU3RyaW5nID0gcmVwbGFjZVBsYWNlaG9sZGVyKGNvbW1hbmQsIHVyaVN0cmluZywgU0VMRUNUSU9OX1RFTVBMQVRFLCBlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpOyAvL2N1cnJlbnRseSByZXBsYWNlZCB3aXRoIGVtcHR5IHN0cmluZyBpZiBubyBzZWxlY3Rpb25cclxuXHRcdH1cclxuXHJcblx0XHRpZiAodXJpU3RyaW5nLmluY2x1ZGVzKExJTkVfVEVNUExBVEUpKSB7IC8vY3VycmVudCBsaW5lXHJcblx0XHRcdGNvbnN0IGN1cnJlbnRMaW5lID0gZWRpdG9yLmdldEN1cnNvcigpLmxpbmU7XHJcblx0XHRcdHVyaVN0cmluZyA9IHJlcGxhY2VQbGFjZWhvbGRlcihjb21tYW5kLCB1cmlTdHJpbmcsIExJTkVfVEVNUExBVEUsIGVkaXRvci5nZXRMaW5lKGN1cnJlbnRMaW5lKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHVyaVN0cmluZy5pbmNsdWRlcyhGSUxFX1BBVEhfVEVNUExBVEUpKSB7IC8vcGF0aCBpbnNpZGUgdGhlIHZhdWx0IHRvIHRoZSBjdXJyZW50IGZpbGVcclxuXHRcdFx0dXJpU3RyaW5nID0gcmVwbGFjZVBsYWNlaG9sZGVyKGNvbW1hbmQsIHVyaVN0cmluZywgRklMRV9QQVRIX1RFTVBMQVRFLCBmaWxlLnBhdGgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh1cmlTdHJpbmcuaW5jbHVkZXMoVkFVTFRfTkFNRV9URU1QTEFURSkpIHsgLy9uYW1lIG9mIHRoZSBjdXJyZW50IHZhdWx0XHJcblx0XHRcdHVyaVN0cmluZyA9IHJlcGxhY2VQbGFjZWhvbGRlcihjb21tYW5kLCB1cmlTdHJpbmcsIFZBVUxUX05BTUVfVEVNUExBVEUsIHRoaXMuYXBwLnZhdWx0LmdldE5hbWUoKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0d2luZG93Lm9wZW4odXJpU3RyaW5nKTtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm5vdGlmaWNhdGlvbiA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRuZXcgTm90aWNlKGBPcGVuaW5nICR7dXJpU3RyaW5nfWApO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVwbGFjZVBsYWNlaG9sZGVyKGNvbW1hbmQ6IFVSSUNvbW1hbmQsIHVyaVN0cmluZzogc3RyaW5nLCBwbGFjZWhvbGRlcjogc3RyaW5nIHwgUmVnRXhwLCByZXBsYWNlbWVudFN0cmluZzogc3RyaW5nKSB7XHJcblx0aWYgKGNvbW1hbmQuZW5jb2RlKSB7XHJcblx0XHRyZXBsYWNlbWVudFN0cmluZyA9IGVuY29kZVVSSUNvbXBvbmVudChyZXBsYWNlbWVudFN0cmluZyk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdXJpU3RyaW5nLnJlcGxhY2UocGxhY2Vob2xkZXIsIHJlcGxhY2VtZW50U3RyaW5nKTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbIkZ1enp5U3VnZ2VzdE1vZGFsIiwic2V0SWNvbiIsIk1vZGFsIiwiU2V0dGluZyIsIm1vbWVudCIsIlBsdWdpblNldHRpbmdUYWIiLCJQbHVnaW4iLCJNYXJrZG93blZpZXciLCJOb3RpY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1REE7QUFDTyxTQUFTLFNBQVMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUU7QUFDN0QsSUFBSSxTQUFTLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxPQUFPLEtBQUssWUFBWSxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLFVBQVUsT0FBTyxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7QUFDaEgsSUFBSSxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDL0QsUUFBUSxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxD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VyxFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLGFBQWEsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLGtCQUFrQixFQUFFLG1CQUFtQixFQUFFLGtCQUFrQixFQUFFLGdCQUFnQixFQUFFLG1CQUFtQixFQUFFLGlCQUFpQixFQUFFLGdCQUFnQixFQUFFLGlCQUFpQixFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxRQUFRLEVBQUUsYUFBYSxFQUFFLGdCQUFnQixFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsY0FBYyxFQUFFLFlBQVksRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLFdBQVcsRUFBRSxhQUFhLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLG9CQUFvQixFQUFFLHFCQUFxQixFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsY0FBYyxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsaUJBQWlCLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsa0JBQWtCLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxFQUFFLGlCQUFpQixFQUFFLGVBQWUsRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsU0FBUyxFQUFFLGFBQWEsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLGFBQWEsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxjQUFjLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxjQUFjLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxrQkFBa0IsRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLGlCQUFpQixFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLGVBQWUsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUUsY0FBYyxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxjQUFjLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLGlCQUFpQixFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsVUFBVSxFQUFFLGlCQUFpQixFQUFFLHFCQUFxQixFQUFFLGVBQWUsRUFBRSxpQkFBaUIsRUFBRSxlQUFlLEVBQUUsaUJBQWlCLEVBQUUsZUFBZSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsY0FBYyxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxjQUFjLEVBQUUsZ0JBQWdCLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxlQUFlLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxnQkFBZ0IsRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLGdCQUFnQixFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsa0JBQWtCLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsc0JBQXNCLEVBQUUsb0JBQW9CLEVBQUUsY0FBYyxFQUFFLFlBQVksRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxjQUFjLEVBQUUsZUFBZSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLGVBQWUsRUFBRSxjQUFjLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLHFCQUFxQixFQUFFLFlBQVksRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsZUFBZSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxhQUFhLEVBQUUsYUFB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
